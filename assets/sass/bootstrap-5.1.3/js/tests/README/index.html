<h2>How does Bootstrap's test suite work?</h2>
<p>Bootstrap uses <a href="https://jasmine.github.io/">Jasmine</a>. Each plugin has a file dedicated to its tests in <code>tests/unit/&lt;plugin-name&gt;.spec.js</code>.</p>
<ul>
<li><code>visual/</code> contains &quot;visual&quot; tests which are run interactively in real browsers and require manual verification by humans.</li>
</ul>
<p>To run the unit test suite via <a href="https://karma-runner.github.io/">Karma</a>, run <code>npm run js-test</code>.
To run the unit test suite via <a href="https://karma-runner.github.io/">Karma</a> and debug, run <code>npm run js-debug</code>.</p>
<h2>How do I add a new unit test?</h2>
<ol>
<li>Locate and open the file dedicated to the plugin which you need to add tests to (<code>tests/unit/&lt;plugin-name&gt;.spec.js</code>).</li>
<li>Review the <a href="https://jasmine.github.io/pages/docs_home.html">Jasmine API Documentation</a> and use the existing tests as references for how to structure your new tests.</li>
<li>Write the necessary unit test(s) for the new or revised functionality.</li>
<li>Run <code>npm run js-test</code> to see the results of your newly-added test(s).</li>
</ol>
<p><strong>Note:</strong> Your new unit tests should fail before your changes are applied to the plugin, and should pass after your changes are applied to the plugin.</p>
<h2>What should a unit test look like?</h2>
<ul>
<li>Each test should have a unique name clearly stating what unit is being tested.</li>
<li>Each test should be in the corresponding <code>describe</code>.</li>
<li>Each test should test only one unit per test, although one test can include several assertions. Create multiple tests for multiple units of functionality.</li>
<li>Each test should use <a href="https://jasmine.github.io/api/edge/matchers.html"><code>expect</code></a> to ensure something is expected.</li>
<li>Each test should follow the project's <a href="https://github.com/twbs/bootstrap/blob/main/.github/CONTRIBUTING.md#js">JavaScript Code Guidelines</a></li>
</ul>
<h2>Code coverage</h2>
<p>Currently we're aiming for at least 90% test coverage for our code. To ensure your changes meet or exceed this limit, run <code>npm run js-test-karma</code> and open the file in <code>js/coverage/lcov-report/index.html</code> to see the code coverage for each plugin. See more details when you select a plugin and ensure your change is fully covered by unit tests.</p>
<h3>Example tests</h3>
<pre><code class="language-js">// Synchronous test
describe('getInstance', () =&gt; {
  it('should return null if there is no instance', () =&gt; {
    // Make assertion
    expect(Tab.getInstance(fixtureEl)).toEqual(null)
  })

  it('should return this instance', () =&gt; {
    fixtureEl.innerHTML = '&lt;div&gt;&lt;/div&gt;'

    const divEl = fixtureEl.querySelector('div')
    const tab = new Tab(divEl)

    // Make assertion
    expect(Tab.getInstance(divEl)).toEqual(tab)
  })
})

// Asynchronous test
it('should show a tooltip without the animation', done =&gt; {
  fixtureEl.innerHTML = '&lt;a href=&quot;#&quot; rel=&quot;tooltip&quot; title=&quot;Another tooltip&quot;&gt;&lt;/a&gt;'

  const tooltipEl = fixtureEl.querySelector('a')
  const tooltip = new Tooltip(tooltipEl, {
    animation: false
  })

  tooltipEl.addEventListener('shown.bs.tooltip', () =&gt; {
    const tip = document.querySelector('.tooltip')

    expect(tip).not.toBeNull()
    expect(tip.classList.contains('fade')).toEqual(false)
    done()
  })

  tooltip.show()
})
</code></pre>
